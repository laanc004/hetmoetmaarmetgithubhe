var cov_uy9gnul0w=function(){var path="/mnt/c/Users/cas/Documents/hetmoetmaarmetgithubhe/src/dispatch.js";var hash="cb55e7023a22689c2fcfad0e179115bf2142e200";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/mnt/c/Users/cas/Documents/hetmoetmaarmetgithubhe/src/dispatch.js",statementMap:{"0":{start:{line:6,column:2},end:{line:6,column:20}},"1":{start:{line:7,column:2},end:{line:7,column:19}},"2":{start:{line:8,column:2},end:{line:8,column:20}},"3":{start:{line:9,column:2},end:{line:9,column:21}},"4":{start:{line:10,column:2},end:{line:10,column:22}},"5":{start:{line:11,column:2},end:{line:11,column:20}},"6":{start:{line:12,column:2},end:{line:12,column:79}},"7":{start:{line:19,column:2},end:{line:22,column:3}},"8":{start:{line:20,column:3},end:{line:20,column:48}},"9":{start:{line:20,column:33},end:{line:20,column:47}},"10":{start:{line:21,column:3},end:{line:21,column:10}},"11":{start:{line:25,column:2},end:{line:28,column:3}},"12":{start:{line:26,column:3},end:{line:26,column:22}},"13":{start:{line:27,column:3},end:{line:27,column:17}},"14":{start:{line:31,column:2},end:{line:33,column:3}},"15":{start:{line:32,column:3},end:{line:32,column:18}},"16":{start:{line:36,column:2},end:{line:51,column:3}},"17":{start:{line:37,column:3},end:{line:49,column:4}},"18":{start:{line:37,column:20},end:{line:37,column:21}},"19":{start:{line:38,column:16},end:{line:38,column:36}},"20":{start:{line:39,column:4},end:{line:39,column:26}},"21":{start:{line:41,column:4},end:{line:47,column:5}},"22":{start:{line:42,column:5},end:{line:42,column:15}},"23":{start:{line:43,column:5},end:{line:43,column:24}},"24":{start:{line:44,column:5},end:{line:44,column:28}},"25":{start:{line:46,column:5},end:{line:46,column:27}},"26":{start:{line:50,column:3},end:{line:50,column:20}},"27":{start:{line:59,column:2},end:{line:69,column:3}},"28":{start:{line:59,column:18},end:{line:59,column:19}},"29":{start:{line:62,column:3},end:{line:62,column:58}},"30":{start:{line:63,column:3},end:{line:63,column:60}},"31":{start:{line:64,column:3},end:{line:64,column:56}},"32":{start:{line:65,column:3},end:{line:65,column:58}},"33":{start:{line:68,column:3},end:{line:68,column:18}},"34":{start:{line:75,column:14},end:{line:75,column:36}},"35":{start:{line:78,column:2},end:{line:78,column:13}},"36":{start:{line:79,column:2},end:{line:79,column:24}},"37":{start:{line:85,column:2},end:{line:85,column:25}},"38":{start:{line:86,column:2},end:{line:86,column:26}},"39":{start:{line:91,column:2},end:{line:91,column:33}},"40":{start:{line:92,column:2},end:{line:92,column:23}},"41":{start:{line:97,column:2},end:{line:112,column:3}},"42":{start:{line:99,column:3},end:{line:111,column:4}},"43":{start:{line:99,column:20},end:{line:99,column:21}},"44":{start:{line:101,column:16},end:{line:101,column:37}},"45":{start:{line:102,column:4},end:{line:102,column:34}},"46":{start:{line:104,column:4},end:{line:110,column:5}},"47":{start:{line:106,column:5},end:{line:106,column:29}},"48":{start:{line:109,column:5},end:{line:109,column:28}},"49":{start:{line:114,column:2},end:{line:129,column:3}},"50":{start:{line:116,column:3},end:{line:128,column:4}},"51":{start:{line:116,column:20},end:{line:116,column:21}},"52":{start:{line:118,column:25},end:{line:118,column:47}},"53":{start:{line:119,column:4},end:{line:127,column:5}},"54":{start:{line:121,column:5},end:{line:121,column:27}},"55":{start:{line:122,column:5},end:{line:122,column:38}},"56":{start:{line:125,column:5},end:{line:125,column:53}},"57":{start:{line:126,column:5},end:{line:126,column:38}},"58":{start:{line:133,column:0},end:{line:133,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:1},end:{line:5,column:2}},loc:{start:{line:5,column:15},end:{line:14,column:2}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:1},end:{line:16,column:2}},loc:{start:{line:16,column:12},end:{line:54,column:2}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:20},end:{line:20,column:21}},loc:{start:{line:20,column:33},end:{line:20,column:47}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:56,column:1},end:{line:56,column:2}},loc:{start:{line:56,column:9},end:{line:71,column:2}},line:56},"4":{name:"(anonymous_4)",decl:{start:{line:73,column:1},end:{line:73,column:2}},loc:{start:{line:73,column:12},end:{line:81,column:2}},line:73},"5":{name:"(anonymous_5)",decl:{start:{line:83,column:1},end:{line:83,column:2}},loc:{start:{line:83,column:17},end:{line:87,column:2}},line:83},"6":{name:"(anonymous_6)",decl:{start:{line:89,column:1},end:{line:89,column:2}},loc:{start:{line:89,column:18},end:{line:93,column:2}},line:89},"7":{name:"(anonymous_7)",decl:{start:{line:95,column:1},end:{line:95,column:2}},loc:{start:{line:95,column:16},end:{line:130,column:2}},line:95}},branchMap:{"0":{loc:{start:{line:19,column:2},end:{line:22,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:22,column:3}},{start:{line:19,column:2},end:{line:22,column:3}}],line:19},"1":{loc:{start:{line:25,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:28,column:3}},{start:{line:25,column:2},end:{line:28,column:3}}],line:25},"2":{loc:{start:{line:31,column:2},end:{line:33,column:3}},type:"if",locations:[{start:{line:31,column:2},end:{line:33,column:3}},{start:{line:31,column:2},end:{line:33,column:3}}],line:31},"3":{loc:{start:{line:36,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:51,column:3}},{start:{line:36,column:2},end:{line:51,column:3}}],line:36},"4":{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:41,column:4},end:{line:47,column:5}}],line:41},"5":{loc:{start:{line:97,column:2},end:{line:112,column:3}},type:"if",locations:[{start:{line:97,column:2},end:{line:112,column:3}},{start:{line:97,column:2},end:{line:112,column:3}}],line:97},"6":{loc:{start:{line:104,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:110,column:5}},{start:{line:104,column:4},end:{line:110,column:5}}],line:104},"7":{loc:{start:{line:114,column:2},end:{line:129,column:3}},type:"if",locations:[{start:{line:114,column:2},end:{line:129,column:3}},{start:{line:114,column:2},end:{line:129,column:3}}],line:114},"8":{loc:{start:{line:119,column:4},end:{line:127,column:5}},type:"if",locations:[{start:{line:119,column:4},end:{line:127,column:5}},{start:{line:119,column:4},end:{line:127,column:5}}],line:119}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();class Dispatch{constructor(){cov_uy9gnul0w.f[0]++;cov_uy9gnul0w.s[0]++;this.vehicles=[];//store all vehicles
cov_uy9gnul0w.s[1]++;this.driving=[];//store all driving vehicles
cov_uy9gnul0w.s[2]++;this.charging=[];//store all charging vehicles
cov_uy9gnul0w.s[3]++;this.available=[];//store all vehicles that have enough charge to drive
cov_uy9gnul0w.s[4]++;this.routeTime=30;//time it takes to drive the entire route
cov_uy9gnul0w.s[5]++;this.stepTime=5;//steps in minutes in which the program goes trough the simulation of time. 
cov_uy9gnul0w.s[6]++;this.minCharge=this.routeTime/this.stepTime*(5.8+Math.random()*5.8);}move(step){cov_uy9gnul0w.f[1]++;cov_uy9gnul0w.s[7]++;//stop all busses at the end of the day
if(step===595){cov_uy9gnul0w.b[0][0]++;cov_uy9gnul0w.s[8]++;this.driving.map(vehicle=>{cov_uy9gnul0w.f[2]++;cov_uy9gnul0w.s[9]++;return vehicle.stop();});cov_uy9gnul0w.s[10]++;return;}else{cov_uy9gnul0w.b[0][1]++;}//end the program
cov_uy9gnul0w.s[11]++;if(step===600){cov_uy9gnul0w.b[1][0]++;cov_uy9gnul0w.s[12]++;console.log(`Done`);cov_uy9gnul0w.s[13]++;return"Done";}else{cov_uy9gnul0w.b[1][1]++;}//dispatch a new bus every 15 minutes
cov_uy9gnul0w.s[14]++;if(step%15==0){cov_uy9gnul0w.b[2][0]++;cov_uy9gnul0w.s[15]++;this.dispatch();}else{cov_uy9gnul0w.b[2][1]++;}//For each step except for the first one, increase the driving time and charge of all busses 
cov_uy9gnul0w.s[16]++;if(step>0){cov_uy9gnul0w.b[3][0]++;cov_uy9gnul0w.s[17]++;for(let count=(cov_uy9gnul0w.s[18]++,0);count<this.driving.length;count++){//Go trough the list of driving busses
const bus=(cov_uy9gnul0w.s[19]++,this.driving.shift());//store the current bus in a variable
cov_uy9gnul0w.s[20]++;this.increaseTime(bus);//inscrease the driving time of the bus with a function
cov_uy9gnul0w.s[21]++;if(bus.drivingTime>=this.routeTime){cov_uy9gnul0w.b[4][0]++;cov_uy9gnul0w.s[22]++;//check if the bus has driven the full route 
bus.stop();//if so, stop the bus
cov_uy9gnul0w.s[23]++;bus.drivingTime=0;//reset the driving time
cov_uy9gnul0w.s[24]++;this.charging.push(bus);//and add the bus to the charging vehicle list
}else{cov_uy9gnul0w.b[4][1]++;cov_uy9gnul0w.s[25]++;this.driving.push(bus);//if not, put the bus back in to the driving vehicle list
}}cov_uy9gnul0w.s[26]++;this.chargeStep();//Charge the vehicles in the available and charging vehicle list. 
}else{cov_uy9gnul0w.b[3][1]++;}}start(){cov_uy9gnul0w.f[3]++;cov_uy9gnul0w.s[27]++;// simulate evolution of time:
for(let step=(cov_uy9gnul0w.s[28]++,0);step<=10*60;step+=this.stepTime){cov_uy9gnul0w.s[29]++;//log data
console.log(`Time is flowing: ${step} minutes passed.`);cov_uy9gnul0w.s[30]++;console.log(`Available busses: ${this.available.length}`);cov_uy9gnul0w.s[31]++;console.log(`Driving busses: ${this.driving.length}`);cov_uy9gnul0w.s[32]++;console.log(`Charging busses: ${this.charging.length}`);//Go through the driving/charging sequence for the busses
cov_uy9gnul0w.s[33]++;this.move(step);}}dispatch(){cov_uy9gnul0w.f[4]++;//Take a bus out of the queue to start driving
const bus=(cov_uy9gnul0w.s[34]++,this.available.shift());//Start driving the bus and add it to the list of driving busses
cov_uy9gnul0w.s[35]++;bus.start();cov_uy9gnul0w.s[36]++;this.driving.push(bus);}addVehicle(veh){cov_uy9gnul0w.f[5]++;cov_uy9gnul0w.s[37]++;//add vehicle to the vehicle list and the available bus queue
this.vehicles.push(veh);cov_uy9gnul0w.s[38]++;this.available.push(veh);}increaseTime(bus){cov_uy9gnul0w.f[6]++;cov_uy9gnul0w.s[39]++;//add 5 minutes to the time that the bus has been driving, used to check if the bus has completed the route
bus.soc-=bus.energyConsumed();cov_uy9gnul0w.s[40]++;bus.drivingTime+=5;}chargeStep(bus){cov_uy9gnul0w.f[7]++;cov_uy9gnul0w.s[41]++;//check if there are busses available for charging
if(this.charging.length>=1){cov_uy9gnul0w.b[5][0]++;cov_uy9gnul0w.s[42]++;//if there are, go through the list of charging busses
for(let count=(cov_uy9gnul0w.s[43]++,0);count<this.charging.length;count++){//take each bus out of the queue one by one and add the charged energy/5min to the soc
const bus=(cov_uy9gnul0w.s[44]++,this.charging.shift());cov_uy9gnul0w.s[45]++;bus.soc+=bus.energyCharged();//if the bus is charged to the minimum required charge for the route
cov_uy9gnul0w.s[46]++;if(bus.soc>=this.minCharge){cov_uy9gnul0w.b[6][0]++;cov_uy9gnul0w.s[47]++;//if so put the bus in the available queue, so it can start driving when needed
this.available.push(bus);}else{cov_uy9gnul0w.b[6][1]++;cov_uy9gnul0w.s[48]++;//else keep the bus in its charging position
this.charging.push(bus);}}}else{cov_uy9gnul0w.b[5][1]++;}//check if there are busses available that are not driving, arent getting used so that they can be charged
cov_uy9gnul0w.s[49]++;if(this.available.length>=1){cov_uy9gnul0w.b[7][0]++;cov_uy9gnul0w.s[50]++;//if there are, go through the list of available busses
for(let count=(cov_uy9gnul0w.s[51]++,0);count<this.available.length;count++){//take each bus from the list and check if the charge
const availableBus=(cov_uy9gnul0w.s[52]++,this.available.shift());cov_uy9gnul0w.s[53]++;if(availableBus.soc>85){cov_uy9gnul0w.b[8][0]++;cov_uy9gnul0w.s[54]++;//if the charge + the charge per 5 minutes exceeds the maximum soc, set the soc to its max 
availableBus.soc=100;cov_uy9gnul0w.s[55]++;this.available.push(availableBus);//put the bus back in line to be able to start driving
}else{cov_uy9gnul0w.b[8][1]++;cov_uy9gnul0w.s[56]++;//else just add the charge per 5 minutes
availableBus.soc+=availableBus.energyCharged();cov_uy9gnul0w.s[57]++;this.available.push(availableBus);//put the bus back in line to be able to start driving
}}}else{cov_uy9gnul0w.b[7][1]++;}}}cov_uy9gnul0w.s[58]++;module.exports=Dispatch;